import { getYandexPassword } from '../common/yandex-pass';
import { CustomContext } from '../types/custom-context.interface';

import { onReset } from './reset.command';

export async function onStart(ctx: CustomContext) {
  await onReset(ctx);
  const payload = ctx?.match;

  if (payload === 'get_password') {
    await ctx.reply(
      `üîê *–í–∞—à –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞*\n\n` +
        `üì• –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ –∏ –≤–≤–µ–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, —á—Ç–æ–±—ã –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç\\.\n\n` +
        `‚ö†Ô∏è –û–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑\\.`,
      { parse_mode: 'MarkdownV2' },
    );
    const pass = await getYandexPassword(ctx.message.from.id.toString());

    return await ctx.reply(`||${pass}||`, { parse_mode: 'MarkdownV2' });
  }

  await ctx.reply(
    'üëã –ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç –¥–ª—è –∑–∞–º–µ—Ç–æ–∫ –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π.\n\n' +
      '‚ú® –í–æ—Ç —á—Ç–æ —è —É–º–µ—é:\n\n' +
      '1Ô∏è‚É£ –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ, –∞—É–¥–∏–æ –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã.\n' +
      '2Ô∏è‚É£ –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º –∑–∞–º–µ—Ç–∫–∞–º.\n' +
      '3Ô∏è‚É£ –£–ø—Ä–∞–≤–ª—è—Ç—å –≤–∞—à–∏–º–∏ –∑–∞–º–µ—Ç–∫–∞–º–∏ —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã.\n\n' +
      'üí¨ –ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –∏–∑ –Ω–µ–≥–æ –∑–∞–º–µ—Ç–∫—É! \n' +
      'üìã –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /menu —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –º–µ–Ω—é –±–æ—Ç–∞',
  );
}
